{"version":3,"sources":["lib/hooks/swap/index.ts","lib/components/TokenSelect/index.tsx","lib/components/Row.tsx","lib/components/Button.tsx","lib/components/Column.tsx","lib/state/swap.ts","lib/components/Rule.tsx","lib/state/atoms.ts","lib/state/settings.ts","lib/components/Dialog.tsx","lib/components/TokenImg.tsx","lib/hooks/useScrollbar.ts","lib/hooks/useNativeEvent.ts","lib/hooks/useUnmount.ts","lib/components/Input.tsx","lib/components/Header.tsx","lib/hooks/swap/useSwapInfo.tsx","lib/hooks/routing/useClientSideSmartOrderRouterTrade.ts","lib/hooks/swap/useBestTrade.ts","lib/css/loading.ts","lib/components/TokenSelect/TokenBase.tsx","lib/components/TokenSelect/TokenButton.tsx","lib/components/TokenSelect/TokenOptions.tsx","lib/hooks/useCurrencyColor.ts","lib/components/Swap/TokenInput.tsx","lib/components/Swap/Input.tsx"],"names":["amountAtom","pickAtom","swapAtom","useSwitchSwapCurrencies","update","useUpdateAtom","useCallback","swap","oldOutput","Field","OUTPUT","INPUT","independentField","useSwapCurrency","field","atom","useMemo","otherAtom","otherField","useAtom","currency","setCurrency","otherCurrency","useAtomValue","switchSwapCurrencies","setOrSwitchCurrency","useSwapAmount","amount","independentFieldAtom","value","undefined","updateSwap","updateAmount","useIsAmountPopulated","Boolean","SearchInput","styled","StringInput","inputCss","TokenSelectDialog","onSelect","useState","query","setQuery","queriedTokens","useQueryTokenList","tokens","filter","token","baseTokens","input","useRef","useEffect","current","focus","options","setOptions","title","gap","pad","grow","Body1","onChange","placeholder","onKeyDown","onBlur","blur","ref","length","justify","flex","map","onClick","currencyId","padded","TokenSelect","collapsed","disabled","open","setOpen","selectAndClose","color","onClose","Row","div","align","theme","children","Children","count","BaseButton","button","onInteractive","onHover","outline","secondary","transparentButton","defaultColor","TextButton","SecondaryButton","IconButton","Icon","icon","iconProps","props","Column","css","atomWithImmer","nativeOnChain","SupportedChainId","AVALANCHE","displayTxHashAtom","feeOptionsAtom","Rule","hr","scrollingEdge","anAtom","key","setter","draft","get","set","withImmer","derived","setTogglable","MAX_VALID_SLIPPAGE","Percent","MIN_HIGH_SLIPPAGE","initialSettings","maxSlippage","transactionTtl","mockTogglable","clientSideRouter","settingsAtom","atomWithReset","maxSlippageAtom","transactionTtlAtom","mockTogglableAtom","clientSideRouterAtom","Context","createContext","element","active","setActive","Provider","context","inert","OnCloseContext","Header","ruled","useContext","X","Modal","borderRadius","Layer","DIALOG","Dialog","dialog","useUnmount","close","e","document","addEventListener","removeEventListener","createPortal","className","badSrcs","Set","srcs","useCurrencyLogoURIs","src","setSrc","find","has","onError","add","alt","name","symbol","module","Math","sqrt","size","overflowCss","scrollbarCss","interactive","useScrollbar","overflow","setOverflow","hasOverflow","useNativeEvent","scrollHeight","clientHeight","eventListener","UNMOUNTING","node","parent","parentElement","removeChild","child","classList","onanimationend","call","Input","forwardRef","target","inputMode","autoComplete","autoCorrect","type","minLength","spellCheck","isNumericallyEqual","a","b","split","aInteger","aDecimal","bInteger","bDecimal","JSBI","equal","BigInt","NumericInput","enforcer","pattern","state","setState","validateChange","event","nextInput","replace","maxLength","integerRegexp","integerEnforcer","nextUserInput","test","parseInt","isNaN","toString","IntegerInput","decimalRegexp","decimalEnforcer","DecimalInput","container","HeaderRow","largeIconCss","iconSize","Subhead1","BAD_RECIPIENT_ADDRESSES","swapInfoAtom","currencies","currencyBalances","currencyAmounts","trade","TradeState","INVALID","allowedSlippage","feeOptions","SwapInfoUpdater","setSwapInfo","swapInfo","account","useActiveWeb3React","inputCurrency","outputCurrency","to","relevantTokenBalances","useCurrencyBalances","isExactIn","parsedAmount","tryParseCurrencyAmount","useBestTrade","TradeType","EXACT_INPUT","EXACT_OUTPUT","inputAmount","outputAmount","autoSlippageTolerance","useAutoSlippageTolerance","inputError","formattedTo","isAddress","maximumAmountIn","balanceIn","amountIn","lessThan","useComputeSwapInfo","useSwapInfo","config","protocols","Protocol","V2","V3","useClientSideSmartOrderRouterTrade","tradeType","amountSpecified","chainId","library","currencyIn","currencyOut","queryArgs","useRoutingAPIArguments","tokenIn","tokenOut","useClientSideRouter","params","provider","loading","setLoading","quoteResult","error","setFetchedResult","getClientSideQuote","result","data","fetchQuote","route","computeRoutes","gasUseEstimateUSD","useStablecoinAmountFromFiatValue","LOADING","otherAmount","CurrencyAmount","fromRawAmount","quote","NO_ROUTE_FOUND","transformRoutesToTrade","VALID","console","debug","useDebounce","debouncedAmount","debouncedOtherCurrency","clientSORTrade","getTradeInputs","amountFromLatestTrade","currencyFromTrade","otherCurrencyFromTrade","debouncing","syncing","amounts","indepdenentCurrencies","dependentCurrencies","amountsMatch","equalTo","currenciesMatch","equals","isTradeDebouncing","useFallback","fallbackTrade","useClientSideV3Trade","SYNCING","loadingOpacityCss","$loading","TokenButton","Button","TokenBase","ButtonMedium","StyledTokenButton","empty","TokenButtonRow","buttonBackgroundColor","contentColor","ButtonLarge","strokeWidth","TokenList","FixedSizeList","hover","scrollbar","OnHover","TokenOption","index","style","i18n","useLingui","onEvent","balance","useCurrencyBalance","onFocus","onMouseMove","Caption","greaterThan","formatCurrencyAmount","locale","itemKey","ItemRow","memo","areEqual","TokenOptions","focused","setFocused","setHover","list","scrollTo","scrollToItem","preventDefault","useImperativeHandle","setElement","invariant","marginTop","scrollTop","disableWidth","height","width","itemCount","itemData","itemSize","outerRef","colors","Map","getColorFromLogoURIs","logoURIs","cb","logoURI","uri","startsWith","getColorFromUriPath","Vibrant","from","getPalette","palette","hex","usePrefetchCurrencyColor","useTheme","tokenColorExtraction","useCurrencyColor","setColor","useLayoutEffect","stale","TokenInputRow","ValueInput","primary","delayedFadeIn","keyframes","MaxButton","TokenInput","onMax","onChangeInput","onChangeCurrency","max","showMax","setShowMax","relatedTarget","H2","LoadingSpan","span","InputColumn","TokenImg","approved","tradeState","inputCurrencyAmount","inputUSDC","useUSDCValue","swapInputAmount","updateSwapInputAmount","swapInputCurrency","updateSwapInputCurrency","isTradeLoading","isLoading","toExact","Subhead2","toSignificant","Body2","toFixed","userSelect"],"mappings":"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","file":"static/js/19.55158373.chunk.js","sourcesContent":["import { Currency } from '@uniswap/sdk-core'\nimport { useAtom } from 'jotai'\nimport { useAtomValue, useUpdateAtom } from 'jotai/utils'\nimport { pickAtom } from 'lib/state/atoms'\nimport { Field, independentFieldAtom, swapAtom } from 'lib/state/swap'\nimport { useCallback, useMemo } from 'react'\nexport { default as useSwapInfo } from './useSwapInfo'\n\nexport const amountAtom = pickAtom(swapAtom, 'amount')\n\nfunction otherField(field: Field) {\n  switch (field) {\n    case Field.INPUT:\n      return Field.OUTPUT\n      break\n    case Field.OUTPUT:\n      return Field.INPUT\n      break\n  }\n}\n\nexport function useSwitchSwapCurrencies() {\n  const update = useUpdateAtom(swapAtom)\n  return useCallback(() => {\n    update((swap) => {\n      const oldOutput = swap[Field.OUTPUT]\n      swap[Field.OUTPUT] = swap[Field.INPUT]\n      swap[Field.INPUT] = oldOutput\n      switch (swap.independentField) {\n        case Field.INPUT:\n          swap.independentField = Field.OUTPUT\n          break\n        case Field.OUTPUT:\n          swap.independentField = Field.INPUT\n          break\n      }\n    })\n  }, [update])\n}\n\nexport function useSwapCurrency(field: Field): [Currency | undefined, (currency?: Currency) => void] {\n  const atom = useMemo(() => pickAtom(swapAtom, field), [field])\n  const otherAtom = useMemo(() => pickAtom(swapAtom, otherField(field)), [field])\n  const [currency, setCurrency] = useAtom(atom)\n  const otherCurrency = useAtomValue(otherAtom)\n  const switchSwapCurrencies = useSwitchSwapCurrencies()\n  const setOrSwitchCurrency = useCallback(\n    (currency?: Currency) => {\n      if (currency === otherCurrency) {\n        switchSwapCurrencies()\n      } else {\n        setCurrency(currency)\n      }\n    },\n    [otherCurrency, setCurrency, switchSwapCurrencies]\n  )\n  return [currency, setOrSwitchCurrency]\n}\n\nexport function useSwapAmount(field: Field): [string | undefined, (amount: string) => void] {\n  const amount = useAtomValue(amountAtom)\n  const independentField = useAtomValue(independentFieldAtom)\n  const value = useMemo(() => (independentField === field ? amount : undefined), [amount, independentField, field])\n  const updateSwap = useUpdateAtom(swapAtom)\n  const updateAmount = useCallback(\n    (amount: string) =>\n      updateSwap((swap) => {\n        swap.independentField = field\n        swap.amount = amount\n      }),\n    [field, updateSwap]\n  )\n  return [value, updateAmount]\n}\n\n// check if any amount has been entered by user\nexport function useIsAmountPopulated() {\n  return Boolean(useAtomValue(amountAtom))\n}\n","import { t, Trans } from '@lingui/macro'\nimport { Currency } from '@uniswap/sdk-core'\nimport { useQueryTokenList } from 'lib/hooks/useTokenList'\nimport styled, { ThemedText } from 'lib/theme'\nimport { ElementRef, useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { currencyId } from 'utils/currencyId'\n\nimport Column from '../Column'\nimport Dialog, { Header } from '../Dialog'\nimport { inputCss, StringInput } from '../Input'\nimport Row from '../Row'\nimport Rule from '../Rule'\nimport TokenBase from './TokenBase'\nimport TokenButton from './TokenButton'\nimport TokenOptions from './TokenOptions'\n\nconst SearchInput = styled(StringInput)`\n  ${inputCss}\n`\n\ninterface TokenSelectDialogProps {\n  value?: Currency\n  onSelect: (token: Currency) => void\n}\n\nexport function TokenSelectDialog({ value, onSelect }: TokenSelectDialogProps) {\n  const [query, setQuery] = useState('')\n  const queriedTokens = useQueryTokenList(query)\n  const tokens = useMemo(() => queriedTokens.filter((token) => token !== value), [queriedTokens, value])\n\n  const baseTokens: Currency[] = [] // TODO(zzmp): Add base tokens to token list functionality\n\n  const input = useRef<HTMLInputElement>(null)\n  useEffect(() => input.current?.focus(), [input])\n\n  const [options, setOptions] = useState<ElementRef<typeof TokenOptions> | null>(null)\n\n  return (\n    <>\n      <Header title={<Trans>Selec token</Trans>} />\n      <Column gap={0.75}>\n        <Row pad={0.75} grow>\n          <ThemedText.Body1>\n            <SearchInput\n              value={query}\n              onChange={setQuery}\n              placeholder={t`Search by token name or address`}\n              onKeyDown={options?.onKeyDown}\n              onBlur={options?.blur}\n              ref={input}\n            />\n          </ThemedText.Body1>\n        </Row>\n        {Boolean(baseTokens.length) && (\n          <Row pad={0.75} gap={0.25} justify=\"flex-start\" flex>\n            {baseTokens.map((token) => (\n              <TokenBase value={token} onClick={onSelect} key={currencyId(token)} />\n            ))}\n          </Row>\n        )}\n        <Rule padded />\n      </Column>\n      <TokenOptions tokens={tokens} onSelect={onSelect} ref={setOptions} />\n    </>\n  )\n}\n\ninterface TokenSelectProps {\n  value?: Currency\n  collapsed: boolean\n  disabled?: boolean\n  onSelect: (value: Currency) => void\n}\n\nexport default function TokenSelect({ value, collapsed, disabled, onSelect }: TokenSelectProps) {\n  const [open, setOpen] = useState(false)\n  const selectAndClose = useCallback(\n    (value: Currency) => {\n      onSelect(value)\n      setOpen(false)\n    },\n    [onSelect, setOpen]\n  )\n  return (\n    <>\n      <TokenButton value={value} collapsed={collapsed} disabled={disabled} onClick={() => setOpen(true)} />\n      {open && (\n        <Dialog color=\"module\" onClose={() => setOpen(false)}>\n          <TokenSelectDialog value={value} onSelect={selectAndClose} />\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import styled, { Color, Theme } from 'lib/theme'\nimport { Children, ReactNode } from 'react'\n\nconst Row = styled.div<{\n  color?: Color\n  align?: string\n  justify?: string\n  pad?: number\n  gap?: number\n  flex?: true\n  grow?: true | 'first' | 'last'\n  children?: ReactNode\n  theme: Theme\n}>`\n  align-items: ${({ align }) => align ?? 'center'};\n  color: ${({ color, theme }) => color && theme[color]};\n  display: ${({ flex }) => (flex ? 'flex' : 'grid')};\n  flex-flow: wrap;\n  flex-grow: ${({ grow }) => grow && 1};\n  gap: ${({ gap }) => gap && `${gap}em`};\n  grid-auto-flow: column;\n  grid-template-columns: ${({ grow, children }) => {\n    if (grow === 'first') return '1fr'\n    if (grow === 'last') return `repeat(${Children.count(children) - 1}, auto) 1fr`\n    if (grow) return `repeat(${Children.count(children)}, 1fr)`\n    return undefined\n  }};\n  justify-content: ${({ justify }) => justify ?? 'space-between'};\n  padding: ${({ pad }) => pad && `0 ${pad}em`};\n`\n\nexport default Row\n","import { Icon } from 'lib/icons'\nimport styled, { Color } from 'lib/theme'\nimport { ComponentProps } from 'react'\n\nexport const BaseButton = styled.button`\n  background-color: transparent;\n  border: none;\n  border-radius: 0.5em;\n  color: currentColor;\n  cursor: pointer;\n  font-size: inherit;\n  font-weight: inherit;\n  line-height: inherit;\n  margin: 0;\n  padding: 0;\n\n  :disabled {\n    cursor: initial;\n    filter: saturate(0) opacity(0.4);\n  }\n`\n\nexport default styled(BaseButton)<{ color?: Color }>`\n  color: ${({ color = 'interactive', theme }) => color === 'interactive' && theme.onInteractive};\n\n  :enabled {\n    background-color: ${({ color = 'interactive', theme }) => theme[color]};\n  }\n\n  :enabled:hover {\n    background-color: ${({ color = 'interactive', theme }) => theme.onHover(theme[color])};\n  }\n\n  :disabled {\n    border: 1px solid ${({ theme }) => theme.outline};\n    color: ${({ theme }) => theme.secondary};\n    cursor: initial;\n  }\n`\n\nconst transparentButton = (defaultColor: Color) => styled(BaseButton)<{ color?: Color }>`\n  color: ${({ color = defaultColor, theme }) => theme[color]};\n\n  :enabled:hover {\n    color: ${({ color = defaultColor, theme }) => theme.onHover(theme[color])};\n  }\n`\n\nexport const TextButton = transparentButton('accent')\n\nconst SecondaryButton = transparentButton('secondary')\n\ninterface IconButtonProps {\n  icon: Icon\n  iconProps?: ComponentProps<Icon>\n}\n\nexport function IconButton({ icon: Icon, iconProps, ...props }: IconButtonProps & ComponentProps<typeof BaseButton>) {\n  return (\n    <SecondaryButton {...props}>\n      <Icon {...iconProps} />\n    </SecondaryButton>\n  )\n}\n","import styled, { Color, css, Theme } from 'lib/theme'\n\nconst Column = styled.div<{\n  align?: string\n  color?: Color\n  justify?: string\n  gap?: number\n  padded?: true\n  flex?: true\n  grow?: true\n  theme: Theme\n  css?: ReturnType<typeof css>\n}>`\n  align-items: ${({ align }) => align ?? 'center'};\n  color: ${({ color, theme }) => color && theme[color]};\n  display: ${({ flex }) => (flex ? 'flex' : 'grid')};\n  flex-direction: column;\n  flex-grow: ${({ grow }) => grow && 1};\n  gap: ${({ gap }) => gap && `${gap}em`};\n  grid-auto-flow: row;\n  grid-template-columns: 1fr;\n  justify-content: ${({ justify }) => justify ?? 'space-between'};\n  padding: ${({ padded }) => padded && '0.75em'};\n\n  ${({ css }) => css}\n`\n\nexport default Column\n","import { Currency } from '@uniswap/sdk-core'\nimport { FeeOptions } from '@uniswap/v3-sdk'\nimport { SupportedChainId } from 'constants/chains'\nimport { nativeOnChain } from 'constants/tokens'\nimport { atom } from 'jotai'\nimport { atomWithImmer } from 'jotai/immer'\nimport { pickAtom } from 'lib/state/atoms'\n\nexport enum Field {\n  INPUT = 'INPUT',\n  OUTPUT = 'OUTPUT',\n}\n\nexport interface Swap {\n  independentField: Field\n  amount: string\n  [Field.INPUT]?: Currency\n  [Field.OUTPUT]?: Currency\n}\n\nexport const swapAtom = atomWithImmer<Swap>({\n  independentField: Field.INPUT,\n  amount: '',\n  [Field.INPUT]: nativeOnChain(SupportedChainId.AVALANCHE),\n})\n\nexport const independentFieldAtom = pickAtom(swapAtom, 'independentField')\n\n// If set to a transaction hash, that transaction will display in a status dialog.\nexport const displayTxHashAtom = atom<string | undefined>(undefined)\n\nexport const feeOptionsAtom = atom<FeeOptions | undefined>(undefined)\n","import styled from 'lib/theme'\n\nconst Rule = styled.hr<{ padded?: true; scrollingEdge?: 'top' | 'bottom' }>`\n  border: none;\n  border-bottom: 1px solid ${({ theme }) => theme.outline};\n  margin: 0 ${({ padded }) => (padded ? '0.75em' : 0)};\n  margin-bottom: ${({ scrollingEdge }) => (scrollingEdge === 'bottom' ? -1 : 0)}px;\n  margin-top: ${({ scrollingEdge }) => (scrollingEdge !== 'bottom' ? -1 : 0)}px;\n`\n\nexport default Rule\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { Draft } from 'immer'\nimport { atom, WritableAtom } from 'jotai'\nimport { withImmer } from 'jotai/immer'\n\n/**\n * Creates a derived atom whose value is the picked object property.\n * By default, the setter acts as a primitive atom's, changing the original atom.\n * A custom setter may also be passed, which uses an Immer Draft so that it may be mutated directly.\n */\nexport function pickAtom<Value, Key extends keyof Value & keyof Draft<Value>, Update>(\n  anAtom: WritableAtom<Value, Value>,\n  key: Key,\n  setter: (draft: Draft<Value>[Key], update: Update) => Draft<Value>[Key]\n): WritableAtom<Value[Key], Update>\nexport function pickAtom<Value, Key extends keyof Value & keyof Draft<Value>, Update extends Value[Key]>(\n  anAtom: WritableAtom<Value, Value>,\n  key: Key,\n  setter?: (draft: Draft<Value>[Key], update: Update) => Draft<Value>[Key]\n): WritableAtom<Value[Key], Update>\nexport function pickAtom<Value, Key extends keyof Value & keyof Draft<Value>, Update extends Value[Key]>(\n  anAtom: WritableAtom<Value, Value>,\n  key: Key,\n  setter: (draft: Draft<Value>[Key], update: Update) => Draft<Value>[Key] = (draft, update) =>\n    update as Draft<Value>[Key]\n): WritableAtom<Value[Key], Update> {\n  return atom(\n    (get) => get(anAtom)[key],\n    (get, set, update: Update) =>\n      set(withImmer(anAtom), (value) => {\n        const derived = setter(value[key], update)\n        value[key] = derived\n      })\n  )\n}\n\n/** Sets a togglable atom to invert its state at the next render. */\nexport function setTogglable(draft: boolean) {\n  return !draft\n}\n","import { Percent } from '@uniswap/sdk-core'\nimport { atomWithReset } from 'jotai/utils'\n\nimport { pickAtom, setTogglable } from './atoms'\n\nexport const MAX_VALID_SLIPPAGE = new Percent(1, 2)\nexport const MIN_HIGH_SLIPPAGE = new Percent(1, 100)\n\ninterface Settings {\n  maxSlippage: Percent | 'auto' // auto will cause slippage to resort to default calculation\n  transactionTtl: number | undefined\n  mockTogglable: boolean\n  clientSideRouter: boolean // whether to use the client-side router or query the remote API\n}\n\nconst initialSettings: Settings = {\n  maxSlippage: 'auto',\n  transactionTtl: undefined,\n  mockTogglable: true,\n  clientSideRouter: true,\n}\n\nexport const settingsAtom = atomWithReset(initialSettings)\nexport const maxSlippageAtom = pickAtom(settingsAtom, 'maxSlippage')\nexport const transactionTtlAtom = pickAtom(settingsAtom, 'transactionTtl')\nexport const mockTogglableAtom = pickAtom(settingsAtom, 'mockTogglable', setTogglable)\nexport const clientSideRouterAtom = pickAtom(settingsAtom, 'clientSideRouter')\n","import 'wicg-inert'\n\nimport useUnmount from 'lib/hooks/useUnmount'\nimport { X } from 'lib/icons'\nimport styled, { Color, Layer, ThemeProvider } from 'lib/theme'\nimport { createContext, ReactElement, ReactNode, useContext, useEffect, useRef, useState } from 'react'\nimport { createPortal } from 'react-dom'\n\nimport { IconButton } from './Button'\nimport Column from './Column'\nimport { default as BaseHeader } from './Header'\nimport Rule from './Rule'\n\n// Include inert from wicg-inert\ndeclare global {\n  interface HTMLElement {\n    inert?: boolean\n  }\n}\n\nconst Context = createContext({\n  element: null as HTMLElement | null,\n  active: false,\n  setActive: (active: boolean) => undefined as void,\n})\n\ninterface ProviderProps {\n  value: HTMLElement | null\n  children: ReactNode\n}\n\nexport function Provider({ value, children }: ProviderProps) {\n  // If a Dialog is active, mark the main content inert\n  const ref = useRef<HTMLDivElement>(null)\n  const [active, setActive] = useState(false)\n  const context = { element: value, active, setActive }\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.inert = active\n    }\n  }, [active])\n  return (\n    <div ref={ref}>\n      <Context.Provider value={context}>{children}</Context.Provider>\n    </div>\n  )\n}\n\nconst OnCloseContext = createContext<() => void>(() => void 0)\n\ninterface HeaderProps {\n  title?: ReactElement\n  ruled?: boolean\n  children?: ReactNode\n}\n\nexport function Header({ title, children, ruled }: HeaderProps) {\n  return (\n    <>\n      <Column>\n        <BaseHeader title={title}>\n          {children}\n          <IconButton color=\"primary\" onClick={useContext(OnCloseContext)} icon={X} />\n        </BaseHeader>\n        {ruled && <Rule padded />}\n      </Column>\n    </>\n  )\n}\n\nexport const Modal = styled.div<{ color: Color }>`\n  background-color: ${({ color, theme }) => theme[color]};\n  border-radius: ${({ theme }) => theme.borderRadius * 0.75}em;\n  display: flex;\n  flex-direction: column;\n  height: calc(100% - 0.5em);\n  left: 0;\n  margin: 0.25em;\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  width: calc(100% - 0.5em);\n  z-index: ${Layer.DIALOG};\n`\n\ninterface DialogProps {\n  color: Color\n  children: ReactNode\n  onClose?: () => void\n}\n\nexport default function Dialog({ color, children, onClose = () => void 0 }: DialogProps) {\n  const context = useContext(Context)\n  useEffect(() => {\n    context.setActive(true)\n    return () => context.setActive(false)\n  }, [context])\n  const dialog = useRef<HTMLDivElement>(null)\n  useUnmount(dialog)\n  useEffect(() => {\n    const close = (e: KeyboardEvent) => e.key === 'Escape' && onClose?.()\n    document.addEventListener('keydown', close, true)\n    return () => document.removeEventListener('keydown', close, true)\n  }, [onClose])\n  return (\n    context.element &&\n    createPortal(\n      <ThemeProvider>\n        <Modal className=\"dialog\" color={color} ref={dialog}>\n          <OnCloseContext.Provider value={onClose}>{children}</OnCloseContext.Provider>\n        </Modal>\n      </ThemeProvider>,\n      context.element\n    )\n  )\n}\n","import { Currency } from '@uniswap/sdk-core'\nimport useCurrencyLogoURIs from 'lib/hooks/useCurrencyLogoURIs'\nimport { Slash } from 'lib/icons'\nimport styled from 'lib/theme'\nimport { useCallback, useEffect, useState } from 'react'\n\nconst badSrcs = new Set<string>()\n\ninterface TokenImgProps {\n  className?: string\n  token: Currency\n}\n\nfunction TokenImg({ className, token }: TokenImgProps) {\n  const srcs = useCurrencyLogoURIs(token)\n  const [src, setSrc] = useState<string | undefined>()\n  useEffect(() => {\n    setSrc(srcs.find((src) => !badSrcs.has(src)))\n  }, [srcs])\n  const onError = useCallback(() => {\n    if (src) badSrcs.add(src)\n    setSrc(srcs.find((src) => !badSrcs.has(src)))\n  }, [src, srcs])\n\n  if (src) {\n    return <img className={className} src={src} alt={token.name || token.symbol} onError={onError} />\n  }\n  return <Slash className={className} color=\"secondary\" />\n}\n\nexport default styled(TokenImg)<{ size?: number }>`\n  // radial-gradient calculates distance from the corner, not the edge: divide by sqrt(2)\n  background: radial-gradient(\n    ${({ theme }) => theme.module} calc(100% / ${Math.sqrt(2)} - 1.5px),\n    ${({ theme }) => theme.outline} calc(100% / ${Math.sqrt(2)} - 1.5px)\n  );\n  border-radius: 100%;\n  height: ${({ size }) => size || 1}em;\n  width: ${({ size }) => size || 1}em;\n`\n","import { css } from 'lib/theme'\nimport { useEffect, useMemo, useState } from 'react'\n\nimport useNativeEvent from './useNativeEvent'\n\nconst overflowCss = css`\n  overflow-y: scroll;\n`\n\n/** Customizes the scrollbar for vertical overflow. */\nconst scrollbarCss = (padded: boolean) => css`\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    width: 1.25em;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: radial-gradient(\n        closest-corner at 0.25em 0.25em,\n        ${({ theme }) => theme.interactive} 0.25em,\n        transparent 0.25em\n      ),\n      linear-gradient(\n        to bottom,\n        #ffffff00 0.25em,\n        ${({ theme }) => theme.interactive} 0.25em,\n        ${({ theme }) => theme.interactive} calc(100% - 0.25em),\n        #ffffff00 calc(100% - 0.25em)\n      ),\n      radial-gradient(\n        closest-corner at 0.25em calc(100% - 0.25em),\n        ${({ theme }) => theme.interactive} 0.25em,\n        #ffffff00 0.25em\n      );\n    background-clip: padding-box;\n    border: none;\n    ${padded ? 'border-right' : 'border-left'}: 0.75em solid transparent;\n  }\n\n  @supports not selector(::-webkit-scrollbar-thumb) {\n    scrollbar-color: ${({ theme }) => theme.interactive} transparent;\n  }\n`\n\ninterface ScrollbarOptions {\n  padded?: boolean\n}\n\nexport default function useScrollbar(element: HTMLElement | null, { padded = false }: ScrollbarOptions = {}) {\n  const [overflow, setOverflow] = useState(true)\n  useEffect(() => {\n    setOverflow(hasOverflow(element))\n  }, [element])\n  useNativeEvent(element, 'transitionend', () => setOverflow(hasOverflow(element)))\n  return useMemo(() => (overflow ? scrollbarCss(padded) : overflowCss), [overflow, padded])\n\n  function hasOverflow(element: HTMLElement | null) {\n    if (!element) {\n      return true\n    }\n    return element.scrollHeight > element.clientHeight\n  }\n}\n","import { useEffect } from 'react'\n\nexport default function useNativeEvent(\n  element: HTMLElement | null,\n  ...eventListener: Parameters<HTMLElement['addEventListener']>\n) {\n  useEffect(() => {\n    element?.addEventListener(...eventListener)\n    return () => element?.removeEventListener(...eventListener)\n  }, [element, eventListener])\n}\n","import { RefObject, useEffect } from 'react'\n\nexport const UNMOUNTING = 'unmounting'\n\n/**\n * Delays a node's unmounting so that an animation may be applied.\n * An animation *must* be applied, or the node will not unmount.\n */\nexport default function useUnmount(node: RefObject<HTMLElement>) {\n  useEffect(() => {\n    const current = node.current\n    const parent = current?.parentElement\n    const removeChild = parent?.removeChild\n    if (parent && removeChild) {\n      parent.removeChild = function <T extends Node>(child: T) {\n        if ((child as Node) === current) {\n          current.classList.add(UNMOUNTING)\n          current.onanimationend = () => {\n            removeChild.call(parent, child)\n          }\n          return child\n        } else {\n          return removeChild.call(parent, child) as T\n        }\n      }\n    }\n    return () => {\n      if (parent && removeChild) {\n        parent.removeChild = removeChild\n      }\n    }\n  }, [node])\n}\n","import JSBI from 'jsbi'\nimport styled, { css } from 'lib/theme'\nimport { forwardRef, HTMLProps, useCallback, useEffect, useState } from 'react'\n\nconst Input = styled.input`\n  -webkit-appearance: textfield;\n  background-color: transparent;\n  border: none;\n  color: currentColor;\n  font-family: inherit;\n  font-size: inherit;\n  font-weight: inherit;\n  line-height: inherit;\n  margin: 0;\n  outline: none;\n  overflow: hidden;\n  padding: 0;\n  text-align: left;\n  text-overflow: ellipsis;\n  width: 100%;\n\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n\n  [type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  ::-webkit-outer-spin-button,\n  ::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n\n  ::placeholder {\n    color: ${({ theme }) => theme.secondary};\n  }\n`\n\nexport default Input\n\ninterface StringInputProps extends Omit<HTMLProps<HTMLInputElement>, 'onChange' | 'as' | 'value'> {\n  value: string\n  onChange: (input: string) => void\n}\n\nexport const StringInput = forwardRef<HTMLInputElement, StringInputProps>(function StringInput(\n  { value, onChange, ...props }: StringInputProps,\n  ref\n) {\n  return (\n    <Input\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      // universal input options\n      inputMode=\"text\"\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      // text-specific options\n      type=\"text\"\n      placeholder={props.placeholder || '-'}\n      minLength={1}\n      spellCheck=\"false\"\n      ref={ref as any}\n      {...props}\n    />\n  )\n})\n\ninterface NumericInputProps extends Omit<HTMLProps<HTMLInputElement>, 'onChange' | 'as' | 'value'> {\n  value: string\n  onChange: (input: string) => void\n}\n\ninterface EnforcedNumericInputProps extends NumericInputProps {\n  // Validates nextUserInput; returns stringified value, or null if invalid\n  enforcer: (nextUserInput: string) => string | null\n}\n\nfunction isNumericallyEqual(a: string, b: string) {\n  const [aInteger, aDecimal] = a.split('.')\n  const [bInteger, bDecimal] = b.split('.')\n  return (\n    JSBI.equal(JSBI.BigInt(aInteger ?? 0), JSBI.BigInt(bInteger ?? 0)) &&\n    JSBI.equal(JSBI.BigInt(aDecimal ?? 0), JSBI.BigInt(bDecimal ?? 0))\n  )\n}\n\nconst NumericInput = forwardRef<HTMLInputElement, EnforcedNumericInputProps>(function NumericInput(\n  { value, onChange, enforcer, pattern, ...props }: EnforcedNumericInputProps,\n  ref\n) {\n  const [state, setState] = useState(value ?? '')\n  useEffect(() => {\n    if (!isNumericallyEqual(state, value)) {\n      setState(value ?? '')\n    }\n  }, [value, state, setState])\n\n  const validateChange = useCallback(\n    (event) => {\n      const nextInput = enforcer(event.target.value.replace(/,/g, '.'))\n      if (nextInput !== null) {\n        setState(nextInput ?? '')\n        if (!isNumericallyEqual(nextInput, value)) {\n          onChange(nextInput)\n        }\n      }\n    },\n    [value, onChange, enforcer]\n  )\n\n  return (\n    <Input\n      value={state}\n      onChange={validateChange}\n      // universal input options\n      inputMode=\"decimal\"\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      // text-specific options\n      type=\"text\"\n      pattern={pattern}\n      placeholder={props.placeholder || '0'}\n      minLength={1}\n      maxLength={79}\n      spellCheck=\"false\"\n      ref={ref as any}\n      {...props}\n    />\n  )\n})\n\nconst integerRegexp = /^\\d*$/\nconst integerEnforcer = (nextUserInput: string) => {\n  if (nextUserInput === '' || integerRegexp.test(nextUserInput)) {\n    const nextInput = parseInt(nextUserInput)\n    return isNaN(nextInput) ? '' : nextInput.toString()\n  }\n  return null\n}\nexport const IntegerInput = forwardRef(function IntegerInput(props: NumericInputProps, ref) {\n  return <NumericInput pattern=\"^[0-9]*$\" enforcer={integerEnforcer} ref={ref as any} {...props} />\n})\n\nconst decimalRegexp = /^\\d*(?:[.])?\\d*$/\nconst decimalEnforcer = (nextUserInput: string) => {\n  if (nextUserInput === '') {\n    return ''\n  } else if (nextUserInput === '.') {\n    return '0.'\n  } else if (decimalRegexp.test(nextUserInput)) {\n    return nextUserInput\n  }\n  return null\n}\nexport const DecimalInput = forwardRef(function DecimalInput(props: NumericInputProps, ref) {\n  return <NumericInput pattern=\"^[0-9]*[.,]?[0-9]*$\" enforcer={decimalEnforcer} ref={ref as any} {...props} />\n})\n\nexport const inputCss = css`\n  background-color: ${({ theme }) => theme.container};\n  border: 1px solid ${({ theme }) => theme.container};\n  border-radius: ${({ theme }) => theme.borderRadius}em;\n  cursor: text;\n  padding: calc(0.5em - 1px);\n\n  :hover:not(:focus-within) {\n    background-color: ${({ theme }) => theme.onHover(theme.container)};\n    border-color: ${({ theme }) => theme.onHover(theme.container)};\n  }\n\n  :focus-within {\n    border-color: ${({ theme }) => theme.active};\n  }\n`\n","import { largeIconCss } from 'lib/icons'\nimport styled, { ThemedText } from 'lib/theme'\nimport { ReactElement, ReactNode } from 'react'\n\nimport Row from './Row'\n\nconst HeaderRow = styled(Row)`\n  height: 1.75em;\n  margin: 0 0.75em 0.75em;\n  padding-top: 0.5em;\n  ${largeIconCss}\n`\n\nexport interface HeaderProps {\n  title?: ReactElement\n  children: ReactNode\n}\n\nexport default function Header({ title, children }: HeaderProps) {\n  return (\n    <HeaderRow iconSize={1.2}>\n      <Row gap={0.5}>{title && <ThemedText.Subhead1>{title}</ThemedText.Subhead1>}</Row>\n      <Row gap={1}>{children}</Row>\n    </HeaderRow>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { Currency, CurrencyAmount, Percent, TradeType } from '@uniswap/sdk-core'\nimport { FeeOptions } from '@uniswap/v3-sdk'\nimport useAutoSlippageTolerance from 'hooks/useAutoSlippageTolerance'\nimport { atom } from 'jotai'\nimport { useAtomValue, useUpdateAtom } from 'jotai/utils'\nimport { useCurrencyBalances } from 'lib/hooks/useCurrencyBalance'\nimport { maxSlippageAtom } from 'lib/state/settings'\nimport { feeOptionsAtom, Field, swapAtom } from 'lib/state/swap'\nimport tryParseCurrencyAmount from 'lib/utils/tryParseCurrencyAmount'\nimport { ReactNode, useEffect, useMemo } from 'react'\nimport { InterfaceTrade, TradeState } from 'state/routing/types'\n\nimport { isAddress } from '../../../utils'\nimport useActiveWeb3React from '../useActiveWeb3React'\nimport { useBestTrade } from './useBestTrade'\n\ninterface SwapInfo {\n  currencies: { [field in Field]?: Currency }\n  currencyBalances: { [field in Field]?: CurrencyAmount<Currency> }\n  currencyAmounts: { [field in Field]?: CurrencyAmount<Currency> }\n  trade: {\n    trade?: InterfaceTrade<Currency, Currency, TradeType>\n    state: TradeState\n  }\n  allowedSlippage: Percent\n  feeOptions: FeeOptions | undefined\n}\n\nconst BAD_RECIPIENT_ADDRESSES: { [address: string]: true } = {\n  '0x9Ad6C38BE94206cA50bb0d90783181662f0Cfa10': true, // v2 factory\n  '0xE54Ca86531e17Ef3616d22Ca28b0D458b6C89106': true, // v2 router 01\n  '0x60aE616a2155Ee3d9A68541Ba4544862310933d4': true, // v2 router 02\n}\n\n// from the current swap inputs, compute the best trade and return it.\nfunction useComputeSwapInfo(): SwapInfo {\n  const { account } = useActiveWeb3React()\n\n  const {\n    independentField,\n    amount,\n    [Field.INPUT]: inputCurrency,\n    [Field.OUTPUT]: outputCurrency,\n  } = useAtomValue(swapAtom)\n\n  const feeOptions = useAtomValue(feeOptionsAtom)\n\n  const to = account\n\n  const relevantTokenBalances = useCurrencyBalances(\n    account,\n    useMemo(() => [inputCurrency ?? undefined, outputCurrency ?? undefined], [inputCurrency, outputCurrency])\n  )\n\n  const isExactIn: boolean = independentField === Field.INPUT\n  const parsedAmount = useMemo(\n    () => tryParseCurrencyAmount(amount, (isExactIn ? inputCurrency : outputCurrency) ?? undefined),\n    [inputCurrency, isExactIn, outputCurrency, amount]\n  )\n\n  //@TODO(ianlapham): this would eventually be replaced with routing api logic.\n  const trade = useBestTrade(\n    isExactIn ? TradeType.EXACT_INPUT : TradeType.EXACT_OUTPUT,\n    parsedAmount,\n    (isExactIn ? outputCurrency : inputCurrency) ?? undefined\n  )\n\n  const currencies = useMemo(\n    () => ({\n      [Field.INPUT]: inputCurrency ?? undefined,\n      [Field.OUTPUT]: outputCurrency ?? undefined,\n    }),\n    [inputCurrency, outputCurrency]\n  )\n\n  const currencyBalances = useMemo(\n    () => ({\n      [Field.INPUT]: relevantTokenBalances[0],\n      [Field.OUTPUT]: relevantTokenBalances[1],\n    }),\n    [relevantTokenBalances]\n  )\n\n  const currencyAmounts = useMemo(\n    () => ({\n      [Field.INPUT]: trade.trade?.inputAmount,\n      [Field.OUTPUT]: trade.trade?.outputAmount,\n    }),\n    [trade.trade?.inputAmount, trade.trade?.outputAmount]\n  )\n\n  /*\n   * If user has enabled 'auto' slippage, use the default best slippage calculated\n   * based on the trade. If user has entered custom slippage, use that instead.\n   */\n  const autoSlippageTolerance = useAutoSlippageTolerance(trade.trade)\n  const maxSlippage = useAtomValue(maxSlippageAtom)\n  const allowedSlippage = useMemo(\n    () => (maxSlippage === 'auto' ? autoSlippageTolerance : maxSlippage),\n    [autoSlippageTolerance, maxSlippage]\n  )\n\n  const inputError = useMemo(() => {\n    let inputError: ReactNode | undefined\n\n    if (!account) {\n      inputError = <Trans>Connect Wallet</Trans>\n    }\n\n    if (!currencies[Field.INPUT] || !currencies[Field.OUTPUT]) {\n      inputError = inputError ?? <Trans>Select token</Trans>\n    }\n\n    if (!parsedAmount) {\n      inputError = inputError ?? <Trans>Enter an amount</Trans>\n    }\n\n    const formattedTo = isAddress(to)\n    if (!to || !formattedTo) {\n      inputError = inputError ?? <Trans>Enter a recipient</Trans>\n    } else {\n      if (BAD_RECIPIENT_ADDRESSES[formattedTo]) {\n        inputError = inputError ?? <Trans>Invalid recipient</Trans>\n      }\n    }\n\n    // compare input balance to max input based on version\n    const [balanceIn, amountIn] = [currencyBalances[Field.INPUT], trade.trade?.maximumAmountIn(allowedSlippage)]\n\n    if (balanceIn && amountIn && balanceIn.lessThan(amountIn)) {\n      inputError = <Trans>Insufficient {amountIn.currency.symbol} balance</Trans>\n    }\n\n    return inputError\n  }, [account, allowedSlippage, currencies, currencyBalances, parsedAmount, to, trade.trade])\n\n  return useMemo(\n    () => ({\n      currencies,\n      currencyBalances,\n      currencyAmounts,\n      inputError,\n      trade,\n      allowedSlippage,\n      feeOptions,\n    }),\n    [currencies, currencyBalances, currencyAmounts, inputError, trade, allowedSlippage, feeOptions]\n  )\n}\n\nconst swapInfoAtom = atom<SwapInfo>({\n  currencies: {},\n  currencyBalances: {},\n  currencyAmounts: {},\n  trade: { state: TradeState.INVALID },\n  allowedSlippage: new Percent(0),\n  feeOptions: undefined,\n})\n\nexport function SwapInfoUpdater() {\n  const setSwapInfo = useUpdateAtom(swapInfoAtom)\n  const swapInfo = useComputeSwapInfo()\n  useEffect(() => {\n    setSwapInfo(swapInfo)\n  }, [swapInfo, setSwapInfo])\n  return null\n}\n\n/** Requires that SwapInfoUpdater be installed in the DOM tree. **/\nexport default function useSwapInfo(): SwapInfo {\n  return useAtomValue(swapInfoAtom)\n}\n","import { Protocol } from '@uniswap/router-sdk'\nimport { Currency, CurrencyAmount, TradeType } from '@uniswap/sdk-core'\nimport { useStablecoinAmountFromFiatValue } from 'hooks/useUSDCPrice'\nimport { useEffect, useMemo, useState } from 'react'\nimport { GetQuoteResult, InterfaceTrade, TradeState } from 'state/routing/types'\nimport { computeRoutes, transformRoutesToTrade } from 'state/routing/utils'\n\nimport useActiveWeb3React from '../useActiveWeb3React'\nimport { getClientSideQuote } from './clientSideSmartOrderRouter'\nimport { useRoutingAPIArguments } from './useRoutingAPIArguments'\n\nconst protocols: Protocol[] = [Protocol.V2, Protocol.V3]\nconst config = { protocols }\n\nexport default function useClientSideSmartOrderRouterTrade<TTradeType extends TradeType>(\n  tradeType: TTradeType,\n  amountSpecified?: CurrencyAmount<Currency>,\n  otherCurrency?: Currency\n): {\n  state: TradeState\n  trade: InterfaceTrade<Currency, Currency, TTradeType> | undefined\n} {\n  const chainId = amountSpecified?.currency.chainId\n  const { library } = useActiveWeb3React()\n\n  const [currencyIn, currencyOut]: [Currency | undefined, Currency | undefined] = useMemo(\n    () =>\n      tradeType === TradeType.EXACT_INPUT\n        ? [amountSpecified?.currency, otherCurrency]\n        : [otherCurrency, amountSpecified?.currency],\n    [amountSpecified, otherCurrency, tradeType]\n  )\n\n  const queryArgs = useRoutingAPIArguments({\n    tokenIn: currencyIn,\n    tokenOut: currencyOut,\n    amount: amountSpecified,\n    tradeType,\n    useClientSideRouter: true,\n  })\n  const params = useMemo(() => chainId && library && { chainId, provider: library }, [chainId, library])\n\n  const [loading, setLoading] = useState(false)\n  const [{ quoteResult, error }, setFetchedResult] = useState<{\n    quoteResult: GetQuoteResult | undefined\n    error: unknown\n  }>({\n    quoteResult: undefined,\n    error: undefined,\n  })\n\n  // When arguments update, make a new call to SOR for updated quote\n  useEffect(() => {\n    setLoading(true)\n    fetchQuote()\n\n    async function fetchQuote() {\n      try {\n        if (queryArgs && params) {\n          const result = await getClientSideQuote(queryArgs, params, config)\n          setFetchedResult({\n            quoteResult: result.data,\n            error: result.error,\n          })\n        }\n      } catch (e) {\n        setFetchedResult({\n          quoteResult: undefined,\n          error: true,\n        })\n      } finally {\n        setLoading(false)\n      }\n    }\n  }, [queryArgs, params])\n\n  const route = useMemo(\n    () => computeRoutes(currencyIn, currencyOut, tradeType, quoteResult),\n    [currencyIn, currencyOut, quoteResult, tradeType]\n  )\n\n  // get USD gas cost of trade in active chains stablecoin amount\n  const gasUseEstimateUSD = useStablecoinAmountFromFiatValue(quoteResult?.gasUseEstimateUSD) ?? null\n\n  return useMemo(() => {\n    if (!currencyIn || !currencyOut) {\n      return {\n        state: TradeState.INVALID,\n        trade: undefined,\n      }\n    }\n\n    if (loading && !quoteResult) {\n      // only on first hook render\n      return {\n        state: TradeState.LOADING,\n        trade: undefined,\n      }\n    }\n\n    let otherAmount = undefined\n    if (tradeType === TradeType.EXACT_INPUT && currencyOut && quoteResult) {\n      otherAmount = CurrencyAmount.fromRawAmount(currencyOut, quoteResult.quote)\n    }\n    if (tradeType === TradeType.EXACT_OUTPUT && currencyIn && quoteResult) {\n      otherAmount = CurrencyAmount.fromRawAmount(currencyIn, quoteResult.quote)\n    }\n\n    if (error || !otherAmount || !route || route.length === 0 || !queryArgs) {\n      return {\n        state: TradeState.NO_ROUTE_FOUND,\n        trade: undefined,\n      }\n    }\n\n    try {\n      const trade = transformRoutesToTrade(route, tradeType, gasUseEstimateUSD)\n      return {\n        // always return VALID regardless of isFetching status\n        state: TradeState.VALID,\n        trade,\n      }\n    } catch (e) {\n      console.debug('transformRoutesToTrade failed: ', e)\n      return { state: TradeState.INVALID, trade: undefined }\n    }\n  }, [currencyIn, currencyOut, loading, quoteResult, tradeType, error, route, queryArgs, gasUseEstimateUSD])\n}\n","import { Currency, CurrencyAmount, TradeType } from '@uniswap/sdk-core'\nimport { useClientSideV3Trade } from 'hooks/useClientSideV3Trade'\nimport useDebounce from 'hooks/useDebounce'\nimport { useMemo } from 'react'\nimport { InterfaceTrade, TradeState } from 'state/routing/types'\n\nimport useClientSideSmartOrderRouterTrade from '../routing/useClientSideSmartOrderRouterTrade'\n\n/**\n * Returns the currency amount from independent field, currency from independent field,\n * and currency from dependent field.\n */\nfunction getTradeInputs(\n  trade: InterfaceTrade<Currency, Currency, TradeType> | undefined,\n  tradeType: TradeType\n): [CurrencyAmount<Currency> | undefined, Currency | undefined, Currency | undefined] {\n  if (trade) {\n    if (tradeType === TradeType.EXACT_INPUT) {\n      return [trade.inputAmount, trade.inputAmount.currency, trade.outputAmount.currency]\n    }\n    if (tradeType === TradeType.EXACT_OUTPUT) {\n      return [trade.outputAmount, trade.outputAmount.currency, trade.inputAmount.currency]\n    }\n  }\n  return [undefined, undefined, undefined]\n}\n\ninterface TradeDebouncingParams {\n  amounts: [CurrencyAmount<Currency> | undefined, CurrencyAmount<Currency> | undefined]\n  indepdenentCurrencies: [Currency | undefined, Currency | undefined]\n  dependentCurrencies: [Currency | undefined, Currency | undefined]\n}\n\n/**\n * Returns wether debounced values are stale compared to latest values from trade.\n */\nfunction isTradeDebouncing({ amounts, indepdenentCurrencies, dependentCurrencies }: TradeDebouncingParams): boolean {\n  // Ensure that amount from user input matches latest trade.\n  const amountsMatch = amounts[0] && amounts[1]?.equalTo(amounts[0])\n\n  // Ensure active swap currencies match latest trade.\n  const currenciesMatch =\n    indepdenentCurrencies[0] &&\n    indepdenentCurrencies[1]?.equals(indepdenentCurrencies[0]) &&\n    dependentCurrencies[0] &&\n    dependentCurrencies[1]?.equals(dependentCurrencies[0])\n\n  return !amountsMatch || !currenciesMatch\n}\n\n/**\n * Returns the best v2+v3 trade for a desired swap.\n * @param tradeType whether the swap is an exact in/out\n * @param amountSpecified the exact amount to swap in/out\n * @param otherCurrency the desired output/payment currency\n */\nexport function useBestTrade(\n  tradeType: TradeType,\n  amountSpecified?: CurrencyAmount<Currency>,\n  otherCurrency?: Currency\n): {\n  state: TradeState\n  trade: InterfaceTrade<Currency, Currency, TradeType> | undefined\n} {\n  // Debounce is used to prevent excessive requests to SOR, as it is data intensive.\n  // This helps provide a \"syncing\" state the UI can reference for loading animations.\n  const [debouncedAmount, debouncedOtherCurrency] = useDebounce(\n    useMemo(() => [amountSpecified, otherCurrency], [amountSpecified, otherCurrency]),\n    200\n  )\n\n  const clientSORTrade = useClientSideSmartOrderRouterTrade(tradeType, debouncedAmount, debouncedOtherCurrency)\n\n  const [amountFromLatestTrade, currencyFromTrade, otherCurrencyFromTrade] = getTradeInputs(\n    clientSORTrade.trade,\n    tradeType\n  )\n\n  const debouncing =\n    (amountSpecified && debouncedAmount && amountSpecified !== debouncedAmount) ||\n    (amountSpecified && debouncedOtherCurrency && otherCurrency && debouncedOtherCurrency !== otherCurrency)\n\n  const syncing =\n    amountSpecified &&\n    isTradeDebouncing({\n      amounts: [amountFromLatestTrade, amountSpecified],\n      indepdenentCurrencies: [currencyFromTrade, amountSpecified?.currency],\n      dependentCurrencies: [otherCurrencyFromTrade, debouncedOtherCurrency],\n    })\n\n  const useFallback = !syncing && clientSORTrade.state === TradeState.NO_ROUTE_FOUND\n\n  // Use a simple client side logic as backup if SOR is not available.\n  const fallbackTrade = useClientSideV3Trade(\n    tradeType,\n    useFallback ? debouncedAmount : undefined,\n    useFallback ? debouncedOtherCurrency : undefined\n  )\n\n  return useMemo(\n    () => ({\n      ...(useFallback ? fallbackTrade : clientSORTrade),\n      ...(syncing ? { state: TradeState.SYNCING } : {}),\n      ...(debouncing ? { state: TradeState.LOADING } : {}),\n    }),\n    [debouncing, fallbackTrade, syncing, clientSORTrade, useFallback]\n  )\n}\n","import { css } from 'lib/theme'\n\n// need to use $loading as `loading` is a reserved prop\nexport const loadingOpacityCss = css<{ $loading: boolean }>`\n  filter: ${({ $loading }) => ($loading ? 'grayscale(1)' : 'none')};\n  opacity: ${({ $loading }) => ($loading ? '0.4' : '1')};\n  transition: opacity 0.2s ease-in-out;\n`\n","import { Currency } from '@uniswap/sdk-core'\nimport styled, { ThemedText } from 'lib/theme'\n\nimport Button from '../Button'\nimport Row from '../Row'\nimport TokenImg from '../TokenImg'\n\nconst TokenButton = styled(Button)`\n  border-radius: ${({ theme }) => theme.borderRadius}em;\n  padding: 0.25em 0.75em 0.25em 0.25em;\n`\n\ninterface TokenBaseProps {\n  value: Currency\n  onClick: (value: Currency) => void\n}\n\nexport default function TokenBase({ value, onClick }: TokenBaseProps) {\n  return (\n    <TokenButton onClick={() => onClick(value)}>\n      <ThemedText.ButtonMedium>\n        <Row gap={0.5}>\n          <TokenImg token={value} size={1.5} />\n          {value.symbol}\n        </Row>\n      </ThemedText.ButtonMedium>\n    </TokenButton>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { Currency } from '@uniswap/sdk-core'\nimport { ChevronDown } from 'lib/icons'\nimport styled, { ThemedText } from 'lib/theme'\nimport { useMemo } from 'react'\n\nimport Button from '../Button'\nimport Row from '../Row'\nimport TokenImg from '../TokenImg'\n\nconst StyledTokenButton = styled(Button)<{ empty?: boolean }>`\n  border-radius: ${({ theme }) => theme.borderRadius}em;\n  padding: 0.25em;\n  padding-left: ${({ empty }) => (empty ? 0.75 : 0.25)}em;\n\n  :disabled {\n    // prevents border from expanding the button's box size\n    padding: calc(0.25em - 1px);\n    padding-left: calc(${({ empty }) => (empty ? 0.75 : 0.25)}em - 1px);\n  }\n`\n\nconst TokenButtonRow = styled(Row)<{ collapsed: boolean }>`\n  height: 1.2em;\n  max-width: ${({ collapsed }) => (collapsed ? '1.2' : '8.2')}em;\n  overflow-x: hidden;\n  transition: max-width 0.25s linear;\n`\n\ninterface TokenButtonProps {\n  value?: Currency\n  collapsed: boolean\n  disabled?: boolean\n  onClick: () => void\n}\n\nexport default function TokenButton({ value, collapsed, disabled, onClick }: TokenButtonProps) {\n  const buttonBackgroundColor = useMemo(() => (value ? 'interactive' : 'accent'), [value])\n  const contentColor = useMemo(() => (value || disabled ? 'onInteractive' : 'onAccent'), [value, disabled])\n  return (\n    <StyledTokenButton onClick={onClick} empty={!value} color={buttonBackgroundColor} disabled={disabled}>\n      <ThemedText.ButtonLarge color={contentColor}>\n        <TokenButtonRow gap={0.4} collapsed={Boolean(value) && collapsed}>\n          {value ? (\n            <>\n              <TokenImg token={value} size={1.2} />\n              {value.symbol}\n            </>\n          ) : (\n            <Trans>Select a token</Trans>\n          )}\n          <ChevronDown color={contentColor} strokeWidth={3} />\n        </TokenButtonRow>\n      </ThemedText.ButtonLarge>\n    </StyledTokenButton>\n  )\n}\n","import { useLingui } from '@lingui/react'\nimport { Currency } from '@uniswap/sdk-core'\nimport useActiveWeb3React from 'lib/hooks/useActiveWeb3React'\nimport useCurrencyBalance from 'lib/hooks/useCurrencyBalance'\nimport useNativeEvent from 'lib/hooks/useNativeEvent'\nimport useScrollbar from 'lib/hooks/useScrollbar'\nimport styled, { ThemedText } from 'lib/theme'\nimport {\n  ComponentClass,\n  CSSProperties,\n  forwardRef,\n  KeyboardEvent,\n  memo,\n  SyntheticEvent,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react'\nimport AutoSizer from 'react-virtualized-auto-sizer'\nimport { areEqual, FixedSizeList, FixedSizeListProps } from 'react-window'\nimport invariant from 'tiny-invariant'\nimport { currencyId } from 'utils/currencyId'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\n\nimport { BaseButton } from '../Button'\nimport Column from '../Column'\nimport Row from '../Row'\nimport TokenImg from '../TokenImg'\n\nconst TokenButton = styled(BaseButton)`\n  border-radius: 0;\n  outline: none;\n  padding: 0.5em 0.75em;\n`\n\nconst ITEM_SIZE = 56\ntype ItemData = Currency[]\ninterface FixedSizeTokenList extends FixedSizeList<ItemData>, ComponentClass<FixedSizeListProps<ItemData>> {}\nconst TokenList = styled(FixedSizeList as unknown as FixedSizeTokenList)<{\n  hover: number\n  scrollbar?: ReturnType<typeof useScrollbar>\n}>`\n  ${TokenButton}[data-index='${({ hover }) => hover}'] {\n    background-color: ${({ theme }) => theme.onHover(theme.module)};\n  }\n\n  ${({ scrollbar }) => scrollbar}\n  overscroll-behavior: none; // prevent Firefox's bouncy overscroll effect (because it does not trigger the scroll handler)\n`\nconst OnHover = styled.div<{ hover: number }>`\n  background-color: ${({ theme }) => theme.onHover(theme.module)};\n  height: ${ITEM_SIZE}px;\n  left: 0;\n  position: absolute;\n  top: ${({ hover }) => hover * ITEM_SIZE}px;\n  width: 100%;\n`\n\ninterface TokenOptionProps {\n  index: number\n  value: Currency\n  style: CSSProperties\n}\n\ninterface BubbledEvent extends SyntheticEvent {\n  index?: number\n  token?: Currency\n  ref?: HTMLButtonElement\n}\n\nfunction TokenOption({ index, value, style }: TokenOptionProps) {\n  const { i18n } = useLingui()\n  const ref = useRef<HTMLButtonElement>(null)\n  // Annotate the event to be handled later instead of passing in handlers to avoid rerenders.\n  // This prevents token logos from reloading and flashing on the screen.\n  const onEvent = (e: BubbledEvent) => {\n    e.index = index\n    e.token = value\n    e.ref = ref.current ?? undefined\n  }\n\n  const { account } = useActiveWeb3React()\n  const balance = useCurrencyBalance(account, value)\n\n  return (\n    <TokenButton\n      data-index={index}\n      style={style}\n      onClick={onEvent}\n      onBlur={onEvent}\n      onFocus={onEvent}\n      onMouseMove={onEvent}\n      onKeyDown={onEvent}\n      ref={ref}\n    >\n      <ThemedText.Body1>\n        <Row>\n          <Row gap={0.5}>\n            <TokenImg token={value} size={1.5} />\n            <Column flex gap={0.125} align=\"flex-start\">\n              <ThemedText.Subhead1>{value.symbol}</ThemedText.Subhead1>\n              <ThemedText.Caption color=\"secondary\">{value.name}</ThemedText.Caption>\n            </Column>\n          </Row>\n          {balance?.greaterThan(0) && formatCurrencyAmount(balance, 2, i18n.locale)}\n        </Row>\n      </ThemedText.Body1>\n    </TokenButton>\n  )\n}\n\nconst itemKey = (index: number, tokens: ItemData) => currencyId(tokens[index])\nconst ItemRow = memo(function ItemRow({\n  data: tokens,\n  index,\n  style,\n}: {\n  data: ItemData\n  index: number\n  style: CSSProperties\n}) {\n  return <TokenOption index={index} value={tokens[index]} style={style} />\n},\nareEqual)\n\ninterface TokenOptionsHandle {\n  onKeyDown: (e: KeyboardEvent) => void\n  blur: () => void\n}\n\ninterface TokenOptionsProps {\n  tokens: Currency[]\n  onSelect: (token: Currency) => void\n}\n\nconst TokenOptions = forwardRef<TokenOptionsHandle, TokenOptionsProps>(function TokenOptions(\n  { tokens, onSelect }: TokenOptionsProps,\n  ref\n) {\n  const [focused, setFocused] = useState(false)\n  const [hover, setHover] = useState(-1)\n  useEffect(() => setHover(-1), [tokens])\n\n  const list = useRef<FixedSizeList>(null)\n  const onKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n        if (e.key === 'ArrowDown' && hover < tokens.length - 1) {\n          scrollTo(hover + 1)\n        } else if (e.key === 'ArrowUp' && hover > 0) {\n          scrollTo(hover - 1)\n        } else if (e.key === 'ArrowUp' && hover === -1) {\n          scrollTo(tokens.length - 1)\n        }\n        e.preventDefault()\n      }\n      if (e.key === 'Enter' && hover) {\n        onSelect(tokens[hover])\n      }\n\n      function scrollTo(index: number) {\n        list.current?.scrollToItem(index)\n        setHover(index)\n      }\n    },\n    [hover, onSelect, tokens]\n  )\n  const blur = useCallback(() => setHover(-1), [])\n  useImperativeHandle(ref, () => ({ onKeyDown, blur }), [blur, onKeyDown])\n\n  const onClick = useCallback(({ token }: BubbledEvent) => token && onSelect(token), [onSelect])\n  const onFocus = useCallback(({ index }: BubbledEvent) => {\n    if (index !== undefined) {\n      setHover(index)\n      setFocused(true)\n    }\n  }, [])\n  const onBlur = useCallback(() => setFocused(false), [])\n  const onMouseMove = useCallback(\n    ({ index, ref }: BubbledEvent) => {\n      if (index !== undefined) {\n        setHover(index)\n        if (focused) {\n          ref?.focus()\n        }\n      }\n    },\n    [focused]\n  )\n\n  const [element, setElement] = useState<HTMLElement | null>(null)\n  const scrollbar = useScrollbar(element, { padded: true })\n\n  const onHover = useRef<HTMLDivElement>(null)\n  // use native onscroll handler to capture Safari's bouncy overscroll effect\n  useNativeEvent(element, 'scroll', (e) => {\n    invariant(element)\n    if (onHover.current) {\n      // must be set synchronously to avoid jank (avoiding useState)\n      onHover.current.style.marginTop = `${-element.scrollTop}px`\n    }\n  })\n\n  return (\n    <Column\n      align=\"unset\"\n      grow\n      onKeyDown={onKeyDown}\n      onClick={onClick}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      onMouseMove={onMouseMove}\n      style={{ overflow: 'hidden' }}\n    >\n      {/* OnHover is a workaround to Safari's incorrect (overflow: overlay) implementation */}\n      <OnHover hover={hover} ref={onHover} />\n      <AutoSizer disableWidth>\n        {({ height }) => (\n          <TokenList\n            hover={hover}\n            height={height}\n            width=\"100%\"\n            itemCount={tokens.length}\n            itemData={tokens}\n            itemKey={itemKey}\n            itemSize={ITEM_SIZE}\n            className=\"scrollbar\"\n            ref={list}\n            outerRef={setElement}\n            scrollbar={scrollbar}\n          >\n            {ItemRow}\n          </TokenList>\n        )}\n      </AutoSizer>\n    </Column>\n  )\n})\n\nexport default TokenOptions\n","import { Currency } from '@uniswap/sdk-core'\nimport { useTheme } from 'lib/theme'\nimport Vibrant from 'node-vibrant/lib/bundle'\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport useCurrencyLogoURIs from './useCurrencyLogoURIs'\n\nconst colors = new Map<string, string | undefined>()\n\n/**\n * Extracts the prominent color from a token.\n * NB: If cached, this function returns synchronously; using a callback allows sync or async returns.\n */\nasync function getColorFromLogoURIs(logoURIs: string[], cb: (color: string | undefined) => void = () => void 0) {\n  const key = logoURIs[0]\n  let color = colors.get(key)\n\n  if (!color) {\n    for (const logoURI of logoURIs) {\n      let uri = logoURI\n      if (logoURI.startsWith('http')) {\n        // Color extraction must use a CORS-compatible resource, but the resource may already be cached.\n        // Adds a dummy parameter to force a different browser resource cache entry. Without this, color extraction prevents resource caching.\n        uri += '?color'\n      }\n\n      color = await getColorFromUriPath(uri)\n      if (color) break\n    }\n  }\n\n  colors.set(key, color)\n  return cb(color)\n}\n\nasync function getColorFromUriPath(uri: string): Promise<string | undefined> {\n  try {\n    const palette = await Vibrant.from(uri).getPalette()\n    return palette.Vibrant?.hex\n  } catch {}\n  return\n}\n\nexport function usePrefetchCurrencyColor(token?: Currency) {\n  const theme = useTheme()\n  const logoURIs = useCurrencyLogoURIs(token)\n\n  useEffect(() => {\n    if (theme.tokenColorExtraction && token) {\n      getColorFromLogoURIs(logoURIs)\n    }\n  }, [token, logoURIs, theme.tokenColorExtraction])\n}\n\nexport default function useCurrencyColor(token?: Currency) {\n  const [color, setColor] = useState<string | undefined>(undefined)\n  const theme = useTheme()\n  const logoURIs = useCurrencyLogoURIs(token)\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (theme.tokenColorExtraction && token) {\n      getColorFromLogoURIs(logoURIs, (color) => {\n        if (!stale && color) {\n          setColor(color)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor(undefined)\n    }\n  }, [token, logoURIs, theme.tokenColorExtraction])\n\n  return color\n}\n","import { Trans } from '@lingui/macro'\nimport { Currency } from '@uniswap/sdk-core'\nimport { loadingOpacityCss } from 'lib/css/loading'\nimport styled, { keyframes, ThemedText } from 'lib/theme'\nimport { FocusEvent, ReactNode, useCallback, useRef, useState } from 'react'\n\nimport Button from '../Button'\nimport Column from '../Column'\nimport { DecimalInput } from '../Input'\nimport Row from '../Row'\nimport TokenSelect from '../TokenSelect'\n\nconst TokenInputRow = styled(Row)`\n  grid-template-columns: 1fr;\n`\n\nconst ValueInput = styled(DecimalInput)<{ $loading: boolean }>`\n  color: ${({ theme }) => theme.primary};\n\n  :hover:not(:focus-within) {\n    color: ${({ theme }) => theme.onHover(theme.primary)};\n  }\n\n  :hover:not(:focus-within)::placeholder {\n    color: ${({ theme }) => theme.onHover(theme.secondary)};\n  }\n\n  ${loadingOpacityCss}\n`\n\nconst delayedFadeIn = keyframes`\n  0% {\n    opacity: 0;\n  }\n  25% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n`\n\nconst MaxButton = styled(Button)`\n  animation: ${delayedFadeIn} 0.25s linear;\n  border-radius: 0.75em;\n  padding: 0.5em;\n`\n\ninterface TokenInputProps {\n  currency?: Currency\n  amount: string\n  disabled?: boolean\n  onMax?: () => void\n  onChangeInput: (input: string) => void\n  onChangeCurrency: (currency: Currency) => void\n  loading?: boolean\n  children: ReactNode\n}\n\nexport default function TokenInput({\n  currency,\n  amount,\n  disabled,\n  onMax,\n  onChangeInput,\n  onChangeCurrency,\n  loading,\n  children,\n}: TokenInputProps) {\n  const max = useRef<HTMLButtonElement>(null)\n  const [showMax, setShowMax] = useState(false)\n  const onFocus = useCallback(() => setShowMax(Boolean(onMax)), [onMax])\n  const onBlur = useCallback((e: FocusEvent) => {\n    if (e.relatedTarget !== max.current) {\n      setShowMax(false)\n    }\n  }, [])\n\n  return (\n    <Column gap={0.25}>\n      <TokenInputRow gap={0.5} onBlur={onBlur}>\n        <ThemedText.H2>\n          <ValueInput\n            value={amount}\n            onFocus={onFocus}\n            onChange={onChangeInput}\n            disabled={disabled || !currency}\n            $loading={Boolean(loading)}\n          ></ValueInput>\n        </ThemedText.H2>\n        {showMax && (\n          <MaxButton onClick={onMax} ref={max}>\n            <ThemedText.ButtonMedium>\n              <Trans>Max</Trans>\n            </ThemedText.ButtonMedium>\n          </MaxButton>\n        )}\n        <TokenSelect value={currency} collapsed={showMax} disabled={disabled} onSelect={onChangeCurrency} />\n      </TokenInputRow>\n      {children}\n    </Column>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { useLingui } from '@lingui/react'\nimport { useUSDCValue } from 'hooks/useUSDCPrice'\nimport { useAtomValue } from 'jotai/utils'\nimport { loadingOpacityCss } from 'lib/css/loading'\nimport { useSwapAmount, useSwapCurrency, useSwapInfo } from 'lib/hooks/swap'\nimport { usePrefetchCurrencyColor } from 'lib/hooks/useCurrencyColor'\nimport { Field, independentFieldAtom } from 'lib/state/swap'\nimport styled, { ThemedText } from 'lib/theme'\nimport { useMemo } from 'react'\nimport { TradeState } from 'state/routing/types'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\n\nimport Column from '../Column'\nimport Row from '../Row'\nimport TokenImg from '../TokenImg'\nimport TokenInput from './TokenInput'\n\nconst LoadingSpan = styled.span<{ $loading: boolean }>`\n  ${loadingOpacityCss};\n`\n\nconst InputColumn = styled(Column)<{ approved?: boolean }>`\n  margin: 0.75em;\n  position: relative;\n\n  ${TokenImg} {\n    filter: ${({ approved }) => (approved ? undefined : 'saturate(0) opacity(0.4)')};\n    transition: filter 0.25s;\n  }\n`\n\ninterface InputProps {\n  disabled?: boolean\n}\n\nexport default function Input({ disabled }: InputProps) {\n  const { i18n } = useLingui()\n  const {\n    trade: { state: tradeState },\n    currencyBalances: { [Field.INPUT]: balance },\n    currencyAmounts: { [Field.INPUT]: inputCurrencyAmount },\n  } = useSwapInfo()\n  const inputUSDC = useUSDCValue(inputCurrencyAmount)\n\n  const [swapInputAmount, updateSwapInputAmount] = useSwapAmount(Field.INPUT)\n  const [swapInputCurrency, updateSwapInputCurrency] = useSwapCurrency(Field.INPUT)\n\n  // extract eagerly in case of reversal\n  usePrefetchCurrencyColor(swapInputCurrency)\n\n  const isTradeLoading = useMemo(\n    () => TradeState.LOADING === tradeState || TradeState.SYNCING === tradeState,\n    [tradeState]\n  )\n  const isDependentField = useAtomValue(independentFieldAtom) !== Field.INPUT\n  const isLoading = isDependentField && isTradeLoading\n\n  //TODO(ianlapham): mimic logic from app swap page\n  const mockApproved = true\n\n  const onMax = useMemo(() => {\n    if (balance?.greaterThan(0)) {\n      return () => updateSwapInputAmount(balance.toExact())\n    }\n    return\n  }, [balance, updateSwapInputAmount])\n\n  return (\n    <InputColumn gap={0.5} approved={mockApproved}>\n      <Row>\n        <ThemedText.Subhead2 color=\"secondary\">\n          <Trans>Trading</Trans>\n        </ThemedText.Subhead2>\n      </Row>\n      <TokenInput\n        currency={swapInputCurrency}\n        amount={(swapInputAmount !== undefined ? swapInputAmount : inputCurrencyAmount?.toSignificant(6)) ?? ''}\n        disabled={disabled}\n        onMax={onMax}\n        onChangeInput={updateSwapInputAmount}\n        onChangeCurrency={updateSwapInputCurrency}\n        loading={isLoading}\n      >\n        <ThemedText.Body2 color=\"secondary\">\n          <Row>\n            <LoadingSpan $loading={isLoading}>{inputUSDC ? `$${inputUSDC.toFixed(2)}` : '-'}</LoadingSpan>\n            {balance && (\n              <ThemedText.Body2 color={inputCurrencyAmount?.greaterThan(balance) ? 'error' : undefined}>\n                Balance: <span style={{ userSelect: 'text' }}>{formatCurrencyAmount(balance, 4, i18n.locale)}</span>\n              </ThemedText.Body2>\n            )}\n          </Row>\n        </ThemedText.Body2>\n      </TokenInput>\n      <Row />\n    </InputColumn>\n  )\n}\n"],"sourceRoot":""}